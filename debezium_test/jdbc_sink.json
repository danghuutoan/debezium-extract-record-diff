{
    "name": "jdbc_sink",
    "config": {
        "connector.class":"io.confluent.connect.jdbc.JdbcSinkConnector",
        "tasks.max":"1",
        "connection.url": "jdbc:postgresql://postgres:5432/postgres?user=postgres&password=password",
        "topics":"postgres.public.customers",
        "auto.create": "true",
        "auto.evolve": true,
        "key.converter": "io.confluent.connect.avro.AvroConverter",
        "value.converter": "io.confluent.connect.avro.AvroConverter",
        "transforms":"route,unwrap,InsertField,Reroute,ValueToKey",
        "transforms.unwrap.type": "com.github.danghuutoan.kafka.connect.smt.ExtractOldRecordState",
        "transforms.unwrap.drop.tombstones": "false",
        "transforms.unwrap.delete.handling.mode":"rewrite",
        "transforms.InsertField.type": "org.apache.kafka.connect.transforms.InsertField$Value",
        "transforms.InsertField.timestamp.field": "_valid_to",
        "transforms.InsertField.predicate": "IsCreateEvent",
        "transforms.InsertField.negate": true,
        "transforms.route.type":"io.debezium.transforms.ContentBasedRouter",
        "transforms.route.language":"jsr223.groovy",
        "transforms.route.topic.expression": "value.op == 'c' ? topic+ '_create' : topic+ '_update'",
        "transforms.Reroute.type": "io.debezium.transforms.ByLogicalTableRouter",
        "transforms.Reroute.topic.regex":"(.+)(_create|_update)",
        "transforms.Reroute.topic.replacement":"$1",
        "transforms.ValueToKey.type": "org.apache.kafka.connect.transforms.ValueToKey",
        "transforms.ValueToKey.fields": "id,_valid_to",
        "predicates": "IsCreateEvent",
        "predicates.IsCreateEvent.type":"org.apache.kafka.connect.transforms.predicates.TopicNameMatches",
        "predicates.IsCreateEvent.pattern": "(.+)_create",
        "delete.enabled": "true",
        "pk.mode": "record_key",
        "key.converter.schema.registry.url": "http://schema-registry:8081",
        "value.converter.schema.registry.url": "http://schema-registry:8081"
    }
}